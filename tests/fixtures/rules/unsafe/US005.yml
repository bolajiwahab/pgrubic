---
rule: US005

test_fail_auto_increment_generated_always:
  sql_fail: |
    ALTER TABLE tbl ADD COLUMN tbl_id bigint GENERATED ALWAYS AS IDENTITY;

test_fail_auto_increment_generated_by_default:
  sql_fail: |
    ALTER TABLE tbl ADD COLUMN id bigint GENERATED BY DEFAULT AS IDENTITY;

test_pass_auto_increment_generated_always_existing_column:
  sql_pass: |
    ALTER TABLE tbl
        ALTER COLUMN tbl_id ADD GENERATED ALWAYS AS IDENTITY;

test_pass_auto_increment_generated_by_default_existing_column:
  sql_pass: |
    ALTER TABLE tbl
        ALTER COLUMN tbl_id ADD GENERATED BY DEFAULT AS IDENTITY;
